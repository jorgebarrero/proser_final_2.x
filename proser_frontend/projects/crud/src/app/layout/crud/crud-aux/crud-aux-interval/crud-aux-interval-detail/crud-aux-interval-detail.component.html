<app-alert [alertMessage]="alertMessage"></app-alert>

<section id="register" class="register" *ngIf="action && show_data">
  <div class="card mt-3">
    <div class="card-body">
      <h3 class="h2 mb-3 font-weight-normal text-center">
        <!-- {{report_title}} -->
      </h3>

      <form [formGroup]="registerForm">
        <div class="register-form">

          <!-- aux_interval_id -->
          <div class="form-group" id="aux_interval_id">
            <label
                   class="register-label">{{model.fieldInfo('aux_interval_id').text}}</label>

            <div *ngIf=" true">
              <p class="register-detail">{{selection.aux_interval_id}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord' && false" type="text"
                   formControlName="aux_interval_id"
                   class="form-control register-input disabled"
                   [ngClass]="{ 'is-invalid': f.aux_interval_id.errors }" />

            <div *ngIf="
                            f.aux_interval_id.dirty && f.aux_interval_id.errors
                          " class="register-error">
              <div *ngIf="f.aux_interval_id.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>

          <!-- aux_interval_status -->
          <div class="form-group" id="aux_interval_status">
            <label
                   class="register-label">{{model.fieldInfo('aux_interval_status').text}}</label>
            <div *ngIf=" true">
              <p class="register-detail">{{selection.aux_interval_status}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord' && false" type="text"
                   formControlName="aux_interval_status"
                   class="form-control register-input" [ngClass]="{
                            'is-invalid': f.aux_interval_status.errors
                          }" />

            <div *ngIf="
                            f.aux_interval_status.dirty &&
                            f.aux_interval_status.errors
                          " class="register-error">
              <div *ngIf="f.aux_interval_status.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>


          <!-- aux_interval_name -->
          <div class="form-group" id="aux_interval_name">
            <label
                   class="register-label">{{model.fieldInfo('aux_interval_name').text}}</label>

            <div *ngIf=" true">
              <p class="register-detail">{{selection.aux_interval_name}}</p>
            </div>

            <input *ngIf="action.action !== 'showRecord' && false" type="text"
                   formControlName="aux_interval_name"
                   class="form-control register-input"
                   [ngClass]="{ 'is-invalid': f.aux_interval_name.errors }" />

            <div *ngIf="
                            f.aux_interval_name.dirty &&
                            f.aux_interval_name.errors
                          " class="register-error">
              <div *ngIf="f.aux_interval_name.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>

          <!-- aux_interval_minutes -->
          <div class="form-group" id="aux_interval_minutes">
            <label
                   class="register-label">{{model.fieldInfo('aux_interval_minutes').text}}</label>
            <div *ngIf="action.action === 'showRecord'">
              <p class="register-detail">{{selection.aux_interval_minutes}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord'" type="text"
                   formControlName="aux_interval_minutes"
                   (change)="onChangeIntervalValue($event)"
                   class="form-control register-input"
                   [ngClass]="{ 'is-invalid': f.aux_interval_minutes.errors }" />

            <div *ngIf="
                          f.aux_interval_minutes.dirty &&
                          f.aux_interval_minutes.errors
                        " class="register-error">
              <div *ngIf="f.aux_interval_minutes.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>


          <!-- aux_interval_value -->
          <div class="form-group" id="aux_interval_value">
            <label
                   class="register-label">{{model.fieldInfo('aux_interval_value').text}}</label>

            <div *ngIf=" true">
              <p class="register-detail">{{selection.aux_interval_value}}</p>
            </div>


            <div *ngIf="action.action === 'showRecord'">
              <p class="register-detail">{{selection.aux_interval_value}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord' && false" type="text"
                   formControlName="aux_interval_value"
                   class="form-control register-input"
                   [ngClass]="{ 'is-invalid': f.aux_interval_value.errors }" />

            <div *ngIf="
                          f.aux_interval_value.dirty &&
                          f.aux_interval_value.errors
                        " class="register-error">
              <div *ngIf="f.aux_interval_value.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>

        </div>



        <article class="form-group mt-3 mb-0 mr-auto register-button-group">

          <div>
            <button type="button" class="btn btn-warning  register-button"
                    (click)="onCancel()">
              Cancelar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-secondary  register-button"
                    *ngIf="action.action === 'newRecord'" (click)="onReset()">
              Reiniciar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-danger  register-button"
                    *ngIf="action.action === 'editRecord' && selection.aux_interval_status === 'I'"
                    (click)="onDelete()">
              Eliminar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-danger  register-button"
                    *ngIf="action.action === 'editRecord' && selection.aux_interval_status === 'A'"
                    (click)="onDeactivate()">
              Desactivar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-primary  register-button"
                    *ngIf="action.action === 'editRecord' && selection.aux_interval_status === 'I'"
                    (click)="onReactivate()">
              Reactivar
            </button>
          </div>


          <div
               *ngIf="registerForm.status === 'VALID' && action.action !== 'showRecord' && ( !registerForm.pristine || show_submit_button)">
            <button type="button" class="btn btn-success  register-button"
                    (click)="onSubmit(registerForm.value)">
              Guardar
            </button>
          </div>
        </article>


      </form>
    </div>
  </div>
</section>