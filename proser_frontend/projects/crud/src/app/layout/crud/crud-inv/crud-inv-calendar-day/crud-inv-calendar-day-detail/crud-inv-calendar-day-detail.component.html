<app-alert [alertMessage]="alertMessage"></app-alert>

<section id="register" class="register" *ngIf="action && show_data">
  <div class="card mt-3">
    <div class="card-body">
      <h3 class="h2 mb-3 font-weight-normal text-center">
        <!-- {{report_title}} -->
      </h3>

      <form [formGroup]="registerForm">
        <!-------------------------- FIELD START --------------------------->

        <div class="register-form">
          <!-- inv_calendarday_id -->
          <div class="form-group" id="inv_calendarday_id">
            <label
                   class="register-label">{{model.fieldInfo('inv_calendarday_id').text}}</label>

            <div *ngIf=" true">
              <p class="register-detail">{{selection.inv_calendarday_id}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord' && false" type="text"
                   formControlName="inv_calendarday_id"
                   (change)="onRecordJsonChange()"
                   class="form-control register-input disabled"
                   [ngClass]="{ 'is-invalid': f.inv_calendarday_id.errors }" />

            <div *ngIf="
                            f.inv_calendarday_id.dirty && f.inv_calendarday_id.errors
                          " class="register-error">
              <div *ngIf="f.inv_calendarday_id.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>
          <!-------------------------- FIELD END --------------------------->

          <!-------------------------- FIELD START --------------------------->

          <!-- inv_calendar_id -->
          <div class="form-group" id="inv_calendar_id">
            <label
                   class="register-label">{{model.fieldInfo('inv_calendar_id').text}}</label>
            <div *ngIf="action.action === 'showRecord'">
              <p class="register-detail">{{selection.inv_calendar_id}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord'" type="text"
                   formControlName="inv_calendar_id"
                   (change)="onRecordJsonChange()"
                   class="form-control register-input"
                   [ngClass]="{ 'is-invalid': f.inv_calendar_id.errors }" />

            <div *ngIf="
                          f.inv_calendar_id.dirty &&
                          f.inv_calendar_id.errors
                        " class="register-error">
              <div *ngIf="f.inv_calendar_id.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>
          <!-------------------------- FIELD END --------------------------->

          <!-------------------------- FIELD START --------------------------->

          <!-- inv_calendarday_status -->
          <div class="form-group" id="inv_calendarday_status">
            <label
                   class="register-label">{{model.fieldInfo('inv_calendarday_status').text}}</label>
            <div *ngIf=" true">
              <p class="register-detail">{{selection.inv_calendarday_status}}
              </p>
            </div>
            <input *ngIf="action.action !== 'showRecord' && false" type="text"
                   formControlName="inv_calendarday_status"
                   (change)="onRecordJsonChange()"
                   class="form-control register-input" [ngClass]="{
                            'is-invalid': f.inv_calendarday_status.errors
                          }" />

            <div *ngIf="
                            f.inv_calendarday_status.dirty &&
                            f.inv_calendarday_status.errors
                          " class="register-error">
              <div *ngIf="f.inv_calendarday_status.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>
          <!-------------------------- FIELD END --------------------------->

          <!-- inv_calendarday_date_json -->
          <div class="form-group" id="inv_calendarday_date_json">
            <label
                   class="register-label">{{model.fieldInfo('inv_calendarday_date_json').text}}</label>
            <div *ngIf="action.action === 'showRecord'">
              <p class="register-detail">
                {{selection.inv_calendarday_date_json}}</p>
            </div>

            <div>
              <input type="text" name="dp1" ngbDatepicker #d="ngbDatepicker"
                     (click)="d.toggle()"
                     formControlName="inv_calendarday_date_json"
                     (change)="onRecordJsonChange()"
                     (ngModelChange)="onRecordJsonChange()" />
            </div>

            <div *ngIf="
                  f.inv_calendarday_date_json.dirty &&
                  f.inv_calendarday_date_json.errors
                " class="register-error">
              <div *ngIf="f.inv_calendarday_date_json.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>
          <!-------------------------- FIELD END --------------------------->

          <!-- inv_calendarday_name -->
          <div class="form-group" id="inv_calendarday_name">
            <label
                   class="register-label">{{model.fieldInfo('inv_calendarday_name').text}}</label>
            <div *ngIf="action.action === 'showRecord'">
              <p class="register-detail">{{selection.inv_calendarday_name}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord'" type="text"
                   formControlName="inv_calendarday_name"
                   (change)="onRecordJsonChange()"
                   class="form-control register-input"
                   [ngClass]="{ 'is-invalid': f.inv_calendarday_name.errors }" />

            <div *ngIf="
                            f.inv_calendarday_name.dirty &&
                            f.inv_calendarday_name.errors
                          " class="register-error">
              <div *ngIf="f.inv_calendarday_name.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>
          <!-------------------------- FIELD END --------------------------->

          <!-- inv_calendarday_type -->
          <div class="form-group" id="inv_calendarday_type">
            <label
                   class="register-label">{{model.fieldInfo('inv_calendarday_type').text}}</label>
            <div *ngIf="action.action === 'showRecord'">
              <p class="register-detail">{{selection.inv_calendarday_type}}</p>
            </div>
            <input *ngIf="action.action !== 'showRecord'" type="text"
                   formControlName="inv_calendarday_type"
                   (change)="onRecordJsonChange()"
                   class="form-control register-input"
                   [ngClass]="{ 'is-invalid': f.inv_calendarday_type.errors }" />

            <div *ngIf="
                          f.inv_calendarday_type.dirty &&
                          f.inv_calendarday_type.errors
                        " class="register-error">
              <div *ngIf="f.inv_calendarday_type.errors.required">
                Este dato es obligatorio
              </div>
            </div>
          </div>
          <!-------------------------- FIELD END --------------------------->



        </div>


        <!-------------------------- BUTTONS START --------------------------->
        <article class="form-group mt-3 mb-0 mr-auto register-button-group">

          <div>
            <button type="button" class="btn btn-warning  register-button"
                    (click)="onCancel()">
              Cancelar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-secondary  register-button"
                    *ngIf="action.action === 'newRecord'" (click)="onReset()">
              Reiniciar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-danger  register-button"
                    *ngIf="action.action === 'editRecord' && selection.inv_calendarday_status === 'I'"
                    (click)="onDelete()">
              Eliminar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-danger  register-button"
                    *ngIf="action.action === 'editRecord' && selection.inv_calendarday_status === 'A'"
                    (click)="onDeactivate()">
              Desactivar
            </button>
          </div>

          <div>
            <button type="button" class="btn btn-primary  register-button"
                    *ngIf="action.action === 'editRecord' && selection.inv_calendarday_status === 'I'"
                    (click)="onReactivate()">
              Reactivar
            </button>
          </div>


          <div
               *ngIf="registerForm.status === 'VALID' && action.action !== 'showRecord' && ( !registerForm.pristine || show_submit_button)">
            <button type="button" class="btn btn-success  register-button"
                    (click)="onSubmit(registerForm.value)">
              Guardar
            </button>
          </div>
        </article>


      </form>
    </div>
  </div>
</section>